//UPDATED 12-14-16

/*global $*/
/*global Raphael*/

$(document).ready(function () {
//"use strict";

/*
|----------------------------------------------
|   XML link path
|-----------------------------------------------
*/

var url = "./final-products/interactive-map/xml/interactive-map-offered-practices.xml",

//image paths for preload
 images = [
    "images/success.svg",
    "images/success.png",
    "images/no.svg",
    "images/no.png",
    "images/close-hover.svg",
    "images/close-hover.png",
    "images/external-link-hover.svg",
    "images/external-link-hover.png"
],

//Global HTML Selections
    $radiolabel = $("label"),
    $infobox = $(".infobox"),
    $lastStateFocus, //last focused state
    map = new Raphael("united-states", "960", "550"); //Raphael canvas

/*
|----------------------------------------------
|   Pre loads svg/png icons
|-----------------------------------------------
*/

function preloadImage(url) {
    for(var i = 0; i<url.length; i++){
        var img = new Image();
        img.src = url[i];
    }
}

preloadImage(images);

function displayData(data) {
    var $xmlInfo = data,

//Map Colors
    baseColor = "#DADADA",
    alleyCroppingColor = "#845FAA",
    multiStoryColor = "#de6f00",
    riparianColor = "#336633",
    silvopastureColor = "#de3131",
    windbreakColor = "#2a74a6",
    windbreakRenoColor = "#003c5b",
    highlightColor = "rgba(255,200, 0, 0.5)",
    originalColor,

//Global Arrays
    practices = [], //stores practice real language practice names
    states = [], //arrey stores each state and their respective attributes
    mapLink, //link

//Legend Styles
    legendSquare1 = map.rect(10, 450, 25, 25).attr("stroke", "#FFF"),
    legendSquare2 = map.rect(10, 480, 25, 25).attr({
        "fill": baseColor,
        "stroke": "#FFF"
    });

/*
|----------------------------------------------
|   State Paths & ID/Postal Code Attributes
|-----------------------------------------------
| ****** Must Remain in Alphabetical Order ******
*/

//ALABAMA
var AL = map.path(
    "M349.7,252.8l-0.8-7.3l-1.4-9.6l0.1-7.2l0.4-15.8l-0.1-8.5l0.1-3.3l22.7-1.8l-0.1,1.1l0.1,1.1    l0.3,1.7l1.7,4l1.2,5l0.7,3.1l0.8,2.5l0.7,3.5l1.1,3.2l1.3,1.7l0.2,1.7l1,0.4l0.1,1.1l-0.9,2.5l-0.2,1.6l-0.1,1l0.8,2.2l0.2,2.7    l-0.4,1.2l0.3,0.4l0.7,0.4l0.2,1.5l-2.9-0.2l-3.5,0.3l-13,1.5l-5.3,0.7l-0.1,1.5l0.9,0.9l1.3,1l0.3,4l-2.8,1.3l-1.4-0.2l1.4-1    v-0.5l-1.6-3.1l-1.2-0.3l-0.7,2.2l-0.7,1.4l-0.3-0.1L349.7,252.8L349.7,252.8z"
);
AL.data({
    "id": "Alabama",
    "postal code": "AL"
});
states.push(AL);

//Alaska
var AK = map.path(
    "M108.2,249.4l-0.2,43.6l0.8,0.5l1.6,0.1l0.7-0.6h1.3l0.1,1.5l3.5,3.5l0.2,1.3l1.7-1l0.3-0.1l0.2-1.6    l0.7-0.8l0.6-0.1l1-0.7l1.6,1.1l0.3,1.5l1,0.6l0.6,1.2l2,0.9l1.7,3.1l1.4,2l1.2,1.4l0.7,1.9l2.6,0.9l2.6,1.1l0.5,2.2l0.2,1.6    l-0.5,1.7l-0.9,1.2l-0.8-0.4l-0.7-1.6l-1.4-0.7l-0.9-0.6l-0.4,0.4l0.7,1.4l0.1,1.9l-0.6,0.2l-1-1l-1.1-0.7l0.2,0.8l0.7,0.9    l-0.4,0.4c0,0-0.4-0.2-0.7-0.5c-0.2-0.3-1.1-1.7-1.1-1.7l-0.5-1.2c0,0-0.2,0.7-0.5,0.5s-0.7-0.7-0.7-0.7l0.9-1l-0.7-0.7v-2.6h-0.4    l-0.4,1.7l-0.6,0.2l-0.5-1.9l-0.3-1.9l-0.4-0.2l0.2,2.9v0.6l-0.7-0.7l-1.8-3.1l-1.1-0.2l-0.3-1.9l-0.8-1.5l-0.8-0.6v-1.2l1.1-0.7    l-0.2-0.2l-1.3,0.3l-1.7-1.2l-1.3-1.5l-2.5-1.3l-2.1-1.3l0.7-1.6v-0.8l-0.9,0.8l-1.5,0.6l-1.9-0.6l-2.9-1.2h-2.8l-0.3,0.2l-3.3-2    l-1.1-0.2l-1.4-3l-1.8,0.2l-1.8,0.7l0.2,2.3l0.6-1.5l0.5,0.2l-0.7,2.2l1.6-1.4l0.3,0.8l-2,2.2l-0.7-0.2l-0.2-1l-0.7-0.4l-0.7,0.6    l-1.4-0.9l-1.6,1.1l-0.9,1.1l-1.7,1.1l-2.4-0.1l-0.2-1.1l1.9-0.3v-0.7l-1.2-0.3l0.5-1.2l1.2-2v-0.9l0.1-0.4l2.2-1.2l0.5,0.7h1.4    l-0.7-1.3l-1.9-0.2l-2.6,1.4l-1.2,1.7l-0.9,1.3l-0.6,1.2l-2.1,0.7l-1.6,1.3l-0.2,0.8l1.2,0.5l0.4,1.1l-1.4,1.6l-3.3,2.1l-4,2.1    l-1.1,0.6l-2.7,0.6l-2.7,1.2l0.9,0.7l-0.7,0.7l-0.2,0.6l-1.4-0.5l-1.6,0.1l-0.4,1.2h-0.5l0.2-1.2l-1.8,0.7l-1.5,0.5l-1.7-0.7    l-1.5,1h-1.6l-1.1,0.7l-0.8,0.4l-1.1-0.2l-1.3-0.6l-1.2,0.3l-0.5,0.5l-0.8-0.6v-1l1.6-0.7l3.2,0.3l2.2-0.8l1.1-1.1l1.5-0.3    l0.9-0.4l1.4,0.1l0.8,0.7l0.5-0.2l1.2-1.4l1.6-0.5l1.7-0.3l0.7-0.2l0.3,0.2h0.4l0.7-1.9l2.1-0.7l1-1.9l1.2-2.3l0.8-0.7l0.2-1.3    l-0.8,0.7l-1.7,0.3l-0.3-1.2l-0.7-0.2l-0.5,0.5l-0.1,1.5l-0.7-0.1l-0.7-3l-0.7,0.7l-0.6-0.2l-0.2-1l-2.1,0.1l-1.1,0.6l-1.3-0.2    l0.7-0.7l0.2-1.3l-0.3-1l0.7-0.5l0.7-0.1l-0.3-0.9v-2.2l-0.5-0.5l-0.4,0.7h-3.1l-0.7-0.7l-0.3-2l-1.1-1.8v-0.5l1.1-0.4l0.1-1.1    l0.6-0.6l-0.4-0.2l-0.7,0.2l-0.6-1.4l0.5-2.6l2.3-1.6l1.3-0.8l1-1.9l1.4-0.7l1.3,0.6l0.2,1.2l1.2-0.2l1.6-1.2l0.8,0.3l0.5,0.3h0.8    l1.2-0.7l0.4-2.2c0,0,0.2-1.5,0.5-1.7c0.3-0.2,0.5-0.5,0.5-0.5l-0.6-1l-1.3,0.4l-1.6,0.4l-1-0.2l-1.8-0.9l-2.6-0.1l-1.8-1.9l0.2-2    L59,260l-1.1-0.9l-1-1.9l0.2-0.4l3.5-0.2h1.1l0.5,0.5h0.3l-0.1-0.8l2-0.3l1.3,0.2l0.7,0.6l-0.7,1.1l-0.2,0.7l1.4,0.8l2.6,0.9    l0.9-0.5l-1.2-2.2l-0.5-1.6l0.5-0.4l-1.7-1l-0.2-0.6l0.2-0.8l-0.4-2l-1.5-2.4l-1.2-2.1l1.5-1h1.6l0.9,0.3l2.1-0.1l1.9-1.8l0.6-1.6    l1.9-1.2l0.8,0.5l1.4-0.3l1.9-1.1l0.6-0.1l0.5,0.4l2.3-0.1l1.4-1.6h0.6l1.8,1.2l1,1.1l-0.2,0.6l0.3,0.6l0.8-0.8l2,0.2l0.2,1.9    l1,0.7l3.6,0.3l3.2,2.1l0.7-0.5l2.6,1.3l1.1-0.3l1-0.4l2.5,1L108.2,249.4L108.2,249.4z M49.5,264.1l1.1,2.7l-0.1,0.5l-1.5-0.2    l-0.9-2.1l-0.9-0.7H46l-0.1-1.3l0.9-1.2l0.6,1.2l0.7,0.7L49.5,264.1z M48.2,281.2l1.9,0.4l1.9,0.5l0.4,0.5l-0.8,1.9l-1.6-0.1    l-1.7-1.8L48.2,281.2z M37.6,274l0.6,1.3l0.6,0.8l-0.6,0.4l-1.1-1.6v-1H37.6L37.6,274z M30.6,311.3l1.7-1.2l1.7-0.5l1.3,0.2    l0.2,0.8l1,0.2l1-1l-0.2-0.8l1.4-0.3l1.5,1.3l-0.6,0.9l-2.2,0.6l-1.4-0.2l-1.9-0.6l-2.2,0.7l-0.8,0.2L30.6,311.3L30.6,311.3z     M55.6,309l0.8,1l1.1-0.8l-0.7-0.7L55.6,309z M57.1,310.6l0.6-1.2l1.1,0.2l-0.4,1C58.3,310.6,57.1,310.6,57.1,310.6z M69.1,309.6    l0.7,0.9l0.5-0.6l-0.4-1L69.1,309.6z M73.6,303.2l0.6,3l1.5,0.4l2.6-1.5l2.2-1.3l-0.8-1.2l0.2-1.2l-1.1,0.7l-1.5-0.4l0.8-0.6    l1,0.4l2-0.9l0.2-0.7l-1.2-0.4l0.4-1l-1.4,1l-2.4,1.8l-2.5,1.5L73.6,303.2L73.6,303.2z M95.2,293.1l1.2-0.7l-0.5-0.9l-0.9,0.5    L95.2,293.1z"
);
AK.data({
    "id": "Alaska",
    "postal code": "AK"
});
states.push(AK);

//ARIZONA
var AZ = map.path(
    "M101.5,213.1l-1.3,1.1L100,215l0.2,0.5l9.7,5.4l6.2,3.9l7.5,4.4l8.6,5.1l6.3,1.2l12.7,1.4l8.8-60.8    l-42.7-6.1l-1.6,8.4l-0.8,0l-0.9,1.3l-1.3-0.1l-0.6-1.4l-1.4-0.2l-0.5-0.6h-0.5l-0.5,0.3l-1,0.5l-0.1,3.6l-0.1,0.9l-0.3,6.4    l-0.8,1.1l-0.3,1.7l1.4,2.5l0.6,3l0.4,0.5l0.5,0.3l-0.1,1.2l-0.8,0.7l-1.7,0.9l-1,1l-0.8,1.9l-0.3,2.5l-1.5,1.4l-1,0.3l0.1,0.4    l-0.2,0.9l0.2,0.4l1.9,0.3l-0.3,1.4l-0.8,1.1L101.5,213.1L101.5,213.1z"
);
AZ.data({
    "id": "Arizona",
    "postal code": "AZ"
});
states.push(AZ);

//ARKANSAS
var AR = map.path(
    "M330.6,192.9l-2,0.4l-2.6-0.3l0.2-0.8l1.5-1.3l0.5-1.9l-0.9-1.5l-40,1.3l0.8,3.5v4.2l0.7,5.6    l0.1,19.3l1.2,1l1.5-0.7l1.4,0.6l0.3,3.4l28.4-0.6l0.6-1.1l-0.1-1.8l-0.9-1.5l0.8-0.8l-0.8-1.3l0.3-1.3l0.7-2.9l1.3-1.1l-0.3-1.2    l1.9-2.7l1.4-0.7l-0.1-0.8l-0.2-0.9l1.5-2.9l1.2-0.6l0.2-1.7l0.9-0.6l-1.6-0.2l-0.7-2l1.4-1.2l0.3-1l0.7-2.1L330.6,192.9    L330.6,192.9z"
);
AR.data({
    "id": "Arkansas",
    "postal code": "AR"
});
states.push(AR);

//CALIFORNIA
var CA = map.path(
    "M101.4,212.9l2-0.2l0.8-1l0.3-1.5l-1.8-0.3l-0.3-0.3l0.2-1l-0.1-0.3l1-0.3l1.6-1.4l0.3-2.5l0.7-1.7     l1-1.1l1.8-0.8l0.8-0.8l0-1.1l-0.5-0.3l-0.5-0.5l-0.6-3l-1.4-2.5l0.3-1.8l-1.2-0.5l-35.2-53.2l9.6-34.5L46,94l-0.8,2.4l-0.1,3.8     l-2.6,6l-1.6,1.3l-0.2,0.6l-0.9,0.4l-0.7,2.1l-0.4,1.6l1.4,2.1l0.8,2.1l0.6,1.8l-0.2,3.3l-0.9,1.6l-0.3,3l-0.5,1.9l0.9,2l1.4,2.3     l1.2,2.5l0.7,2.1l-0.2,1.6l-0.2,0.2v1.1l2.9,3.2l-0.2,1.2l-0.3,1.2l-0.3,1l0.1,4.2l1.1,1.9l1,1.3l1.4,0.2l0.5,1.4l-0.6,1.8     l-1.1,0.8h-0.6l-0.4,2l0.2,1.5l1.6,2.2l0.8,2.7l0.7,2.4l0.7,1.6l1.7,3l0.7,1.3l0.2,1.5l0.8,0.5v1.2l-0.4,1l-0.9,3.6l-0.2,1     l1.2,1.4l2.1,0.2l2.3,0.9l2,1.1H62l1.5,1.6l1.3,2.5l0.6,1.2l2,1.1l2.5,0.4l0.7,1.1l0.3,1.6l-0.7,0.3l0.2,0.5l1.6,0.4l1.4,0.1     l1.6-0.9l2,2.1l0.4,1.2l1.3,2.1l0.2,1.6v4.8l0.2,0.9l5.1,0.7l10.1,1.4L101.4,212.9L101.4,212.9z M56.4,190.6l0.7,0.8L57,192     l-1.6,0l-0.3-0.6l-0.3-0.7L56.4,190.6L56.4,190.6z M57.4,190.6l0.6-0.3l1.8,1.1l1.6,0.6l-0.5,0.3l-2.3-0.1l-0.8-0.8L57.4,190.6     L57.4,190.6z M68,200.7l0.9,1.2l0.4,0.5l0.8,0.3l0.3-0.7l-0.5-0.9l-1.4-1l-0.5,0.1V200.7z M67.2,205.1l0.9,1.6l0.6,1l-0.7,0.1     l-0.7-0.6c0,0-0.4-0.7-0.4-0.9s0-1.1,0-1.1L67.2,205.1L67.2,205.1z"
);
CA.data({
    "id": "California",
    "postal code": "CA"
});
states.push(CA);

//COLORADO
var CO = map.path(
    "M221.5,181.7l2.5-44l-57.9-6.5l-6.2,44.9L221.5,181.7z"
);
CO.data({
    "id": "Colorado",
    "postal code": "CO"
});
states.push(CO);

//CONNECTICUT
var CT = map.path(
    "M473.6,109.1l-1.9-7.6l-2.4,0.5l-10.8,2.4l0.5,1.6l0.7,3.7l0.1,4.6l-0.6,1.1l1,1l2.2-2l1.8-1.6l1-1.1    l0.4,0.3l1.4-0.7l2.6-0.6L473.6,109.1L473.6,109.1z"
);
CT.data({
    "id": "Connecticut",
    "postal code": "CT"
});
states.push(CT);

//DELAWARE
var DE = map.path(
    "M448.9,134.4l0.2-1.1l0.2-0.9l-0.8,0.2l-0.8,0.2l-1.1,0.9l0.9,2.6l1.2,2.9l1.1,4.9l0.8,3.2l2.6-0.1    l3.1-0.6l-1.2-3.8l-0.5,0.2l-1.8-1.2l-0.9-2.4l-1-1.8l-1.6-1.5l-0.4-1.1L448.9,134.4L448.9,134.4z"
);
DE.data({
    "id": "Delaware",
    "postal code": "DE"
});
states.push(DE);

//DISTRICT OF COLUMBIA
var DC = map.path(
    "M438.8,145.9l-0.9-0.9l-0.6-0.4l0.7-1l1.5,1L438.8,145.9L438.8,145.9z"
);
DC.data({
    "id": "District of Columbia",
    "postal code": "DC"
});
states.push(DC);

//FLORIDA
var FL = map.path(
    "M415.3,242l1.2,3.7l1.9,5l2.7,4.8l1.9,3.2l2.5,2.8l2.1,1.9l0.8,1.5l-0.6,0.7l-0.4,0.7l1.5,3.8    l1.5,1.5l1.3,2.7l1.8,3l2.3,4.2l0.7,3.9l0.2,6.1l0.3,0.9l-0.2,1.7l-1.2,0.7l0.2,1l-0.3,1l0.2,1.2l0.2,1l-1.4,1.6l-1.6,0.7l-2,0.1    l-0.7,0.8l-1.2,0.5l-0.7-0.2l-0.6-0.5l-0.2-1.5l-0.4-1.7l-1.7-2.6l-1.8-1.2l-2-0.2l-0.4,0.7l-1.6-2.2l-0.3-1.8l-1.3-2.1l-0.9-0.6    l-0.8,1.1l-0.9-0.2l-1.1-2.6l-1.5-2l-1.5-2.7l-1.3-1.6l-1.8-1.9l1.1-1.2l1.6-2.8l-0.1-0.8l-2.3-0.5l-0.8,0.3l0.2,0.3l1.3,0.5    l-0.7,2.3l-0.4,0.2l-0.9-2.1l-0.7-2.5l-0.2-1.4l0.7-2.4V264l-1.6-1.9l-0.7-1.6l-2.6-0.7l-1-0.3l-0.8-1.3l-1.7-0.8l-0.6-1.7    l-1.4-0.5l-1.2-1.9l-2.1-0.7l-1.5-0.7h-1.3l-2.1,0.4l-0.1,1l0.4,0.5l-0.2,0.6l-1.6-0.1l-1.9,1.8l-1.8,1h-2l-1.6,0.7l-0.2-1.4    l-0.8-1l-1.5-0.6l-0.8-0.7l-4.1-2l-3.9-0.9l-2.2,0.3l-3.1,0.2l-3.1,1.1l-1.8,0.3l-0.1-4.1l-1.3-1l-0.9-0.9l0.2-1.6l5.2-0.7l13-1.5    l3.5-0.3l2.8,0.1l1.3,2l0.7,0.7l4.1,0.3l5.5-0.3l11-0.7l2.8-0.3l2.6,0.1l0.2,1.5l1.1,0.4l0.1-2.4l-0.8-2.1l0.7-0.7l2.8,0.2    L415.3,242L415.3,242z M421.7,309.5l1.2-0.3l0.7-0.1l0.7-1.2l1.2-0.8l0.7,0.2l0.9,0.2l0.2,0.5l-1.8,0.6l-2.1,0.7l-1.2,0.6    L421.7,309.5L421.7,309.5z M428.6,307l0.6,0.5l1.4-1.1l2.7-2.1l1.9-2l1.3-3.4l0.5-0.9l0.1-1.7l-0.4,0.2l-0.5,1.4l-0.7,2.4    l-1.6,2.7l-2.2,2.1l-1.7,1L428.6,307L428.6,307z"
);
FL.data({
    "id": "Florida",
    "postal code": "FL"
});
states.push(FL);

//GEORGIA
var GA = map.path(
    "M370.6,199.3v1.1l0.1,1.1l0.3,1.7l1.7,4l1.2,5l0.7,3.1l0.8,2.5l0.7,3.5l1.1,3.2l1.3,1.7l0.2,1.7    l1,0.4l0.1,1.1l-0.9,2.5l-0.2,1.6l-0.1,1l0.8,2.2l0.2,2.7l-0.4,1.2l0.3,0.4l0.7,0.4l0.1,1.6l1.1,1.7l1.1,1.1l4,0.1l5.5-0.3l11-0.7    l2.8-0.3l2.3,0l0.1,1.5l1.3,0.4l0.2-2.2l-0.8-2.3l0.6-0.8l3,0.4l2.5,0.2l-0.4-3.2l1.2-5.1l0.7-2.1l-0.2-1.3l1.7-3.2l-0.3-0.7    l-1,0.4l-1.3-0.7l-0.3-1.1l-0.7-1.8l-1.2-1.1l-1.3-0.3l-0.8-2.5l-1.5-3.2l-2.1-1l-1.1-1l-0.7-1.3l-1.1-1l-1.2-0.7l-1.2-1.5    l-1.6-1.2l-2.3-0.9l-0.2-0.7l-1.2-1.5l-0.2-0.7l-1.7-2.5l-1.8,0.1l-1.9-1.2l-0.7-0.7l-0.2-0.9l0.4-1l1.1-0.6l-0.3-1.1L370.6,199.3    L370.6,199.3z"
);
GA.data({
    "id": "Georgia",
    "postal code": "GA"
});
states.push(GA);

//HAWAII
var HI = map.path(
    "M146.5,282.9l1-1.8l1.2-0.2l0.2,0.4l-1.1,1.6H146.5z M151.7,281l3.1,1.3l1.1-0.2l0.8-2l-0.3-1.7    l-2.1-0.2l-2.1,0.9L151.7,281z M167.4,286.1l1.9,2.8l1.2-0.2l0.6-0.2l0.7,0.7l1.9-0.1l0.5-0.7l-1.5-0.9l-1-1.9l-1.1-1.8l-3,1.5    L167.4,286.1z M177.7,290.6l0.7-1l2.4,0.5l0.3-0.2l3.1,0.3l-0.2,0.7l-1.3,0.7l-2.2-0.2L177.7,290.6L177.7,290.6z M180.4,293.3l1,2    l1.6-0.6l0.2-0.8l-0.8-1.1l-1.9-0.2L180.4,293.3L180.4,293.3z M184,292.7l1.2-1.5l2.4,1.2l2.2,0.6l2.2,1.4v1l-1.8,0.9l-2.5,0.5    l-1.2-0.7L184,292.7z M192.5,300.6l0.8-0.7l1.7,0.8l3.9,1.8l1.7,1.1l0.8,1.2l1,2.2l2.1,1.3l-0.2,0.7l-2,1.6l-2.1,0.7l-0.7-0.3    l-1.6,0.9l-1.2,1.6l-1.2,1.5l-0.9-0.1l-1.8-1.3l-0.2-2.3l0.3-1.2l-0.8-2.9l-1.1-0.9l-0.1-1.3l1.2-0.5l1.1-1.6l0.2-0.5l-0.8-0.9    L192.5,300.6L192.5,300.6z"
);
HI.data({
    "id": "Hawaii",
    "postal code": "HI"
});
states.push(HI);

//IDAHO
var ID = map.path(
    "M103.3,107.9l4.5-18l0.7-2.2l1.3-3l-0.6-1.2l-1.3,0.1l-0.4-0.5l0.2-0.6l0.2-1.6l2.3-2.8l0.9-0.2    l0.6-0.6l0.3-1.6l0.5-0.3l2-3l2-2.2l0.1-1.9l-1.7-1.3l-0.8-2.2l7-32.3l6.9,1.3l-2.2,10.9l1.8,3.8l-0.8,2.4l1,2.4l1.6,0.6l2,4.9    l1.8,2.3l0.3,0.6l1.7,0.6l0.2,1.1l-3.6,8.9l-0.1,1.3l1.3,1.7l0.5,0l2.5-1.5l0.3-0.6l0.8,0.3l-0.1,2.7l1.4,6.4l2,1.6l0.9,1.1    l-0.4,2.1l0.5,1.4l0.5,0.6L143,88l1.5,0l1.5,0.7l1.4-0.3l1.9-0.1l2,0.8l1.4-0.2l0.3-1.5l1.5-0.4l0.6,0.8l0.2,1.5l0.7,0.6    l-4.3,27.4C151.8,117.2,106.9,108.7,103.3,107.9L103.3,107.9z"
);
ID.data({
    "id": "Idaho",
    "postal code": "ID"
});
states.push(ID);

//ILLINOIS
var IL = map.path(
    "M343.7,171.1l0-1.6l0.3-2.4l1.2-1.5l1-2.1l1.1-2l-0.2-2.7l-1-1.8l0-1.7l0.4-2.7L346,149l-0.5-8.1    l-0.7-7.7l-0.5-5.9l-0.1-0.5l-0.4-1.3l-0.7-1.9l-0.8-0.9l-0.7-1.3l-0.1-2.8l-23.4,1.3l0.1,1.2l1.2,0.3l0.5,0.6l0.2,0.9l2,1.7    l0.3,1.2l-0.3,1.7l-0.9,1.9l-0.3,1.3l-1.2,0.9l-0.9,0.3l-2.7,0.7l-0.3,0.9l-0.3,1l0.3,0.7l0.9,0.8l-0.1,2.1l-0.9,0.8l-0.3,0.8v1.4    l-0.9,0.2l-0.8,0.6l-0.1,0.7l0.1,1l-0.9,0.7l-0.5,1.4l0.2,1.9l1.2,3.7l3.7,3.8l2.8,1.9l-0.1,2.2l0.5,0.7l3.3,0.2l1.4,0.7l-0.3,1.9    l-1.2,3l-0.3,1.6l1.2,2l3.3,2.7l2.3,0.3l1,2.6l1,1.6l-0.5,1.5l0.8,2.1l0.9,1l0.7-0.4l0.5-1.1l1.1-0.9l1.1-0.3l1.3,0.6l1.9,0.7    l0.6-0.2l0.1-1.2l-0.7-1.2l0.2-1.2l0.9-0.7l1.5-0.4l0.6-0.2l-0.3-0.7l-0.4-1.2l0.7-0.5L343.7,171.1L343.7,171.1z"
);
IL.data({
    "id": "Illinois",
    "postal code": "IL"
});
states.push(IL);

//INDIANA
var IN = map.path(
    "M343.7,170.9l0-1.5l0.2-2.3l1.2-1.5l0.9-2l1.3-2.1l-0.2-3l-0.9-1.4l-0.2-1.6l0.4-2.8l-0.2-3.5    l-0.7-8.2l-0.7-7.8l-0.5-6l1.6,0.5l0.7,0.5l0.6-0.2l1.1-1l1.4-0.8l2.6-0.1l11.2-1.2l2.8-0.3l0.8,8.1l2.2,18.8l0.3,2.9l-0.2,1.2    l0.6,0.9l0,0.7l-1.3,0.8l-1.8,0.8l-1.6,0.3l-0.3,2.5l-2.3,1.7l-1.4,2l0.2,1.2l-0.3,0.8h-1.7l-0.8-0.8l-1.3,0.6l-1.4,0.8l0.1,1.6    l-0.6,0.1l-0.2-0.5l-1.1-0.8l-1.7,0.7l-0.8,1.5l-0.7-0.4l-0.7-0.8l-2.3,0.2l-2.9,0.5L343.7,170.9L343.7,170.9z"
);
IN.data({
    "id": "Indiana",
    "postal code": "IN"
});
states.push(IN);

//IOWA
var IA = map.path(
    "M318,119.7l0.1,1.4l1.1,0.3l0.5,0.6l0.3,0.9l1.9,1.7l0.3,1.2l-0.3,1.7l-0.8,1.6l-0.4,1.4l-1.1,0.8    l-0.9,0.3l-2.8,0.9l-0.7,2l0.4,0.7l0.9,0.9l-0.1,2.1l-0.9,0.8l-0.4,0.8l0.1,1.4l-1,0.2l-0.8,0.6l-0.1,0.7l0.1,1.1l-0.8,0.6    l-1.3-1.6l-0.6-1.3l-33.5,1.3l-0.5,0.1l-1-2.3l-0.1-3.4l-0.8-2.1l-0.3-2.7l-1.2-1.9l-0.5-2.4l-1.4-3.8l-0.6-2.7l-0.7-1.1l-0.8-1.4    l1-2.5l0.7-2.9l-1.4-1l-0.2-1.4l0.5-1.3h0.9l42.2-0.6l0.4,2.1l1.1,0.8l0.1,0.7l-1,1.7l0.1,1.6l1.3,1.9l1.3,0.7l1.6,0.3L318,119.7    L318,119.7z"
);
IA.data({
    "id": "Iowa",
    "postal code": "IA"
});
states.push(IA);

//KANSAS
var KS = map.path(
    "M286.7,183.4l-6.4,0.1l-23.5-0.2l-22.7-1l-12.6-0.6l2-33l11.3,0.3l20.6,0.4l22.6,0.5h2.6l1.1,1.1l1,0    l0.8,0.5l0,1.5l-0.9,0.9l-0.2,1.1l0.9,1.7l1.5,1.6l1.2,0.8l0.7,5.7L286.7,183.4L286.7,183.4z"
);
KS.data({
    "id": "Kansas",
    "postal code": "KS"
});
states.push(KS);

//KENTUCKY
var KY = map.path(
    "M398,168.5l-1.2,1.2l-1.8,2l-2.5,2.8l-0.6,0.9l0,1.1l-2.2,1.1l-2.9,1.7l-3.7,0.9l-26.5,2.5l-8,0.9    l-2.4,0.3l-2,0l-0.1,2.2l-4.2,0.1l-3.5,0.3l-4.1,0l0.6-0.7l1.3-0.8l0.1-1.6l0.5-0.9l-0.8-1.3l0.4-1l1.2-0.9l1.1-0.3l1.4,0.7    l1.8,0.7l0.6-0.2l0.1-1.2l-0.7-1.2l0.2-1.2l1-0.7l1.3-0.3l0.8-0.3l-0.4-0.9l-0.3-1l0.8-0.5c0,0,0.6-1.8,0.6-1.9l1.6-0.8l2.7-0.5    l2.3-0.2l0.7,0.8l0.8,0.4l0.8-1.6l1.6-0.7l1.1,0.8l0.2,0.5l0.6-0.1l-0.1-1.5l1.6-0.9l1.1-0.5l0.8,0.8l1.7,0l0.3-0.8l-0.2-1.2    l1.3-2l2.4-1.8l0.4-2.5l1.5-0.2l1.9-0.8l1.2-0.9l-0.1-0.8l-0.6-0.7l0.3-1.5l2.1-0.1l1.2-0.4l1.7,0.7l1,2.2l2.6,0l1,1.1l0.8-0.1    l1.3-0.7l2.7,0.3l1.3,0.1l0.9-1l1.3-0.7l1-0.4l0.3,1.4l1,0.5l1.3,1.1l0.1,2.9l0.4,0.8l1.3,0.8l0.4,1.2l2.1,1.8l0.9,1.8L398,168.5    L398,168.5z"
);
KY.data({
    "id": "Kentucky",
    "postal code": "KY"
});
states.push(KY);

//LOUISIANA
var LA = map.path(
    "M337.8,252.2l-1.7-1.6l0.5-2.8l-0.3-0.5l-4.7,0.5l-12.8,0.2l-0.3-1.2l0.5-4.3l1.7-3l2.6-4.4l-0.3-1.2    l0.6-0.3l0.2-1l-1.2-1l-0.1-1l-0.9-2.2l-0.1-3.2l-28.3,0.5l0,4.9l0.3,4.8l0.3,2l1.3,2.1l0.5,2.6l2.2,2.8l0.1,1.6l0.3,0.3l-0.3,4.3    l-1.5,2.6l0.8,1l-0.3,1.3l-0.3,3.7l-0.7,1.6l0.1,1.8l2.4-0.8l6.2,0.1l5.3,1.8l3.3,0.6l1.9-0.7l1.6,0.6l1.6,0.5l0.4-1.1l-1.6-0.6    l-1.3,0.2l-1.4-0.8c0,0,0.1-0.7,0.4-0.7c0.3-0.1,1.6-0.5,1.6-0.5l0.9,0.7l0.9-0.5l1.6,0.3l0.7,1.2l0.2,1.2l2.3,0.2l0.9,0.9    l-0.4,0.8l-0.7,0.4l0.8,0.8l4.3,1.8l1.8-0.7l0.5-1.2l1.3-0.3l0.9-0.7l0.7,0.5l0.4,1.5l-1.2,0.4l0.3,0.3l1.7-0.7l1.2-1.7l0.4-0.2    l-1.1-0.2l0.4-0.8l-0.1-0.7l1.1-0.2l0.6-0.7l0.3,0.4c0,0-0.1,1.6,0.3,1.6c0.4,0,2.1,0.3,2.1,0.3l2.1,1l0.5,0.7h1.5l0.6,0.5    l1.2-1.6v-0.7h-0.7l-1.7-1.4l-3-0.4l-1.6-1.2l0.6-1.4l1.2,0.2l0.1-0.3l-0.9-0.5v-0.2h1.6l0.9-1.6l-0.7-1l-0.2-1.4l-0.7,0.1l-1,1.1    l-0.3,1.3l-1.6-0.3l-0.5-0.9l0.9-1l1-1.8l-0.5-1.2L337.8,252.2L337.8,252.2z"
);
LA.data({
    "id": "Louisiana",
    "postal code": "LA"
});
states.push(LA);

//MAINE
var ME = map.path(
    "M498.5,58.1l1,1.1l1.2,1.9v1l-1.1,2.4l-1,0.3l-1.7,1.6l-2.5,2.8c0,0-0.3,0-0.7,0    c-0.3,0-0.5-1.1-0.5-1.1l-0.9,0.1l-0.5,0.7l-1.2,0.7l-0.5,0.7l0.8,0.7l-0.2,0.3l-0.2,1.4l-1-0.1V72l-0.2-0.7l-0.7,0.2l-0.9-1.6    l-1.1,0.7l0.7,0.7l0.2,0.6l-0.4,0.7l0.2,1.6l0.1,0.8l-0.8,1.3l-1.5,0.2l-0.2,1.5l-2.7,1.6l-0.7,0.2l-0.8-0.7l-1.6,1.8l0.5,1.6    l-0.7,0.7l-0.1,2.2l-0.6,3.2l-1.3-0.6l-0.2-1.6l-2-0.6l-0.2-1.4l-3.7-12l-2.4-7.5l0.7-0.1l0.8,0.2v-1.3l0.7-2.3l1.3-2.4l0.7-2.1    l-1-1.2v-3.1l0.4-0.5l0.4-1.4l-0.1-0.7l-0.1-2.5l0.9-2.5l1.5-4.5l1.1-2.1h0.7l0.7,0.1v0.6l0.7,1.2l1.4,0.3l0.4-0.4v-0.5l2.1-1.5    l0.9-0.9l0.7,0.1l3.1,1.2l1,0.5l4.6,15.3h3.1l0.4,1l0.1,2.5l1.5,1.2h0.4l0.1-0.2l-0.2-0.6L498.5,58.1L498.5,58.1z M487.8,73.5    l0.8-0.8l0.7,0.5l0.3,1.2l-0.9,0.5C488.7,74.9,487.8,73.5,487.8,73.5z M491.2,70.5l0.9,0.9c0,0,0.7,0,0.7-0.1c0-0.2,0.1-1,0.1-1    l0.5-0.4l-0.4-0.9l-1,0.4L491.2,70.5z"
);
ME.data({
    "id": "Maine",
    "postal code": "ME"
});
states.push(ME);

//MARYLAND
var MD = map.path(
    "M456.1,146.7l-3.1,0.6l-2.6,0.1l-0.9-3.5l-1-4.7l-1.3-3.2l-0.7-2.2l-3.8,0.8l-7.6,1.4l-19.1,3.9    l0.6,2.6l0.5,2.9l0.2-0.2l1.1-1.2l1.2-1.3l1.2-0.3l0.7-0.7l0.9-1.3l0.7,0.3l1.5-0.2l1.3-1.1l1-0.7l0.9-0.2l0.8,0.6l1.5,0.7l1,0.9    l0.6,0.8l2.1,0.9v1.5l2.8,0.7l0.6,0.3l0.7-1l1.5,1l-0.7,1.3l-0.4,2l-0.9,1.3v1.1l0.3,0.9l2.6,0.7l2.2,0l1.6,0.5l1.1,0.2l0.5-1.1    l-0.7-1.1v-0.9l-1.2-1.1l-1.1-2.8l0.7-2.7l-0.1-1.1l-0.7-0.7c0,0,0.7-0.8,0.7-1.2c0-0.3,0.2-1.1,0.2-1.1l1-0.7l1-0.8l0.2,0.5    l-0.7,0.8l-0.7,1.9l0.2,0.6l0.9,0.2l0.2,2.8l-1.1,0.5l0.2,1.8l0.2-0.1l0.6-1l0.8,0.9l-0.8,0.7l-0.2,1.7l1.3,1.7l2,0.2l0.8-0.4    l1.7,2.1l0.7,0.3l3.4-1.4l1-2.1L456.1,146.7L456.1,146.7z M447.9,151.3l0.6,1.3l0.1,0.9l0.6,0.9c0,0,0.5-0.5,0.5-0.6    c0-0.2-0.4-1.6-0.4-1.6l-0.4-1.2L447.9,151.3L447.9,151.3z"
);
MD.data({
    "id": "Maryland",
    "postal code": "MD"
});
states.push(MD);

//MASSACHUSETTS
var MA = map.path(
    "M486.6,106.3l1.1-0.3l0.2-0.9l0.5,0.1l0.5,1.2l-0.6,0.2l-2,0.1L486.6,106.3L486.6,106.3z     M481.8,106.7l1.2-1.3h0.8l0.9,0.8l-1.2,0.5l-1.1,0.5L481.8,106.7L481.8,106.7z M464.1,95.5l9-2.4l1.2-0.3l1-1.4l1.9-0.8l1.5,2.3    l-1.2,2.6l-0.2,0.7l1,1.3l0.6-0.4h0.9l1.2,1.3l2,3.1l1.8,0.2l1.2-0.5l0.9-0.9l-0.4-1.4l-1.1-0.8l-0.7,0.4l-0.5-0.7l0.2-0.2    l1.1-0.1l0.9,0.4l1,1.2l0.5,1.5l0.2,1.2l-2.1,0.7l-2,1l-2,2.3l-1,0.7v-0.5l1.2-0.7l0.2-0.9l-0.4-1.6l-1.5,0.7l-0.4,0.7l0.2,1.2    l-1.1,0.5l-1.4-2.3l-1.7-2.2l-1.1-0.9l-3.3,1l-2.6,0.5l-10.5,2.3l-0.3-2.4l0.3-5.4l2.2-0.5L464.1,95.5L464.1,95.5z"
);
MA.data({
    "id": "Massachusetts",
    "postal code": "MA"
});
states.push(MA);

//MICHIGAN
var MI = map.path(
    "M383.7,108.3l-1.6-4.2l-1.2-4.6l-1.2-1.6l-1.3-0.9l-0.8,0.6l-2,0.9l-1,2.6l-1.4,1.9l-0.6,0.3    l-0.7-0.3c0,0-1.3-0.7-1.2-1.1c0.1-0.3,0.2-2.6,0.2-2.6l1.7-0.7l0.4-1.7l0.3-1.3l1.2-0.8l-0.2-5.1l-0.8-1.2l-0.7-0.4l-0.4-1.1    l0.4-0.4l0.8,0.2l0.1-0.8l-1.2-1.2l-0.7-1.3h-1.3l-2.3-0.7l-2.8-1.7H364l-0.3,0.3l-0.5-0.2l-1.6-1.2l-1.5,0.9l-1.5,1.2l0.2,1.8    l0.5,0.2l1.1,0.2l0.2,0.4l-1.3,0.4l-1.3,0.2l-0.7,0.9l-0.2,1.1l0.2,0.8l0.2,2.8l-1.8,1.1l-0.3-0.1v-2.1l0.7-1.2l0.3-1.2l-0.4-0.4    l-1,0.4l-0.5,2.1l-1.4,0.6l-0.9,1l-0.1,0.5l0.3,0.4l-0.3,1.3l-1.2,0.2v0.6l0.4,1.2l-0.6,3.1l-0.8,2.1l0.3,2.4l0.2,0.6l-0.4,1.2    l-0.2,0.4l-0.2,1.4l1.8,3.1l1.5,3.3l0.7,2.5l-0.4,2.4l-0.5,3.1l-1.2,2.6l-0.2,1.4l-1.7,1.6l2.2-0.1l10.9-1.2l3.7-0.5l0,0.9    l3.5-0.6l5.3-0.8l2-0.2l0.1-0.3l0.1-0.7l1.1-1.9l1-0.9l-0.1-2.6l0.8-0.8l0.6-0.2l0.1-1.8l0.8-1.5l0.5,0.3l0.1,0.3l0.4,0.1l1-0.5    L383.7,108.3L383.7,108.3z, M324.4,59.7l0.9-1l1.1-0.4l2.7-2l1.2-0.3l0.2,0.2l-2.6,2.6l-1.7,1l-1,0.5L324.4,59.7L324.4,59.7z     M368.3,76.1l0.3,1.3l1.6,0.1l0.7-0.6c0,0,0-0.7-0.2-0.8c-0.2-0.1-0.8-0.9-0.8-0.9l-1.1,0.1l-0.8,0.1l-0.2,0.6L368.3,76.1    L368.3,76.1z M317.1,74.6l0.4-0.3l1.4-0.4l1.8-1.2v-0.5l0.3-0.3l3.1-0.5l1.2-1l2.2-1.1l0.1-0.7l1-1.5l0.9-0.4l0.7-0.9l1.2-1.2    l2.2-1.2l2.4-0.2l0.6,0.6l-0.2,0.5l-1.9,0.5l-0.7,1.6l-1.2,0.4l-0.2,1.2l-1.2,1.6L331,71l0.4,0.2l0.5-0.6l1.8-1.5l0.7,0.7h1.2    l1.6,0.5l0.7,0.6l0.7,1.6l1.4,1.4l2-0.1l0.7-0.5l0.8,0.7l0.8,0.2l0.7-0.4h0.6l0.8-0.5l2.1-1.8l1.7-0.6l3.4-0.2l2.3-1l1.3-0.7    l0.7,0.1v2.9l0.2,0.2l1.5,0.4l1-0.2l3.1-0.8l0.6-0.6l0.7,0.2v3.5l1.6,1.6l0.7,0.3l0.7,0.5l-0.7,0.2l-0.4-0.2l-1.9-0.2l-1.1,0.3    l-1.2-0.1l-1.6,0.7h-0.9l-3-0.7l-2.6,0.1l-1,1.3l-3.5,0.3l-1.2,0.4l-0.6,1.6l-0.7,0.6l-0.2-0.1l-0.7-0.8l-2.3,1.2h-0.3l-0.6-0.8    l-0.4,0.1l-1,2.2l-0.5,2.1l-1.6,3.6l-0.6-0.5l-0.7-0.5l-1-5.2L336,82l-1-1.2l-6.2-1.4l-1.5-0.5l-4.2-1.1l-4-0.6L317.1,74.6    L317.1,74.6z"
);
MI.data({
    "id": "Michigan",
    "postal code": "MI"
});
states.push(MI);

//MINNESOTA
var MN = map.path(
    "M270.1,83.6l-0.2-4.3l-0.9-3.7l-0.9-6.9l-0.2-5l-0.9-1.7l-0.8-2.6v-5.2l0.3-2l-0.9-2.8l15.4,0    l0.2-4.2l0.3-0.1l1.2,0.2l1,0.4l0.4,2.8l0.7,3.1l0.8,0.8h2.5l0.2,0.7l3.2,0.2v1.1h2.5l0.2-0.7l0.6-0.6l1.2-0.3l0.7,0.5h1.5l2,1.3    l2.7,1.2l1.2,0.2l0.2-0.5l0.7-0.2l0.2,1.5l1.3,0.7l0.2-0.2l0.7,0.1v1.1l1.3,0.5h1.6l0.8-0.4l1.6-1.6l1.3-0.2l0.4,0.9l0.2,0.7h0.5    l0.5-0.4l4.5-0.2l0.9,1.6h0.3l0.4-0.6l2.3-0.2l-0.3,1.2l-2,0.9l-4.7,2.1l-2.4,1l-1.6,1.3l-1.2,1.8l-1.2,2l-0.9,0.4l-2.3,2.6    l-0.7,0.1l-2.2,1.4l-1.3,1.6l-0.1,1.6l0,4.1l-0.7,0.9l-2.6,1.9l-1.1,3.1l1.5,1.1l0.3,1.6l-0.9,1.7l0.1,1.9l0.2,3.4l1.5,1.5h1.7    l1,1.6l1.7,0.3l2,2.9l3.6,2.1l1.1,1.5l0.3,3.3l-41.4,0.6l-0.2-18.2l-0.2-1.5l-2.1-1.7l-0.6-0.9v-0.8l1-0.8l0.7-0.7L270.1,83.6    L270.1,83.6z"
);
MN.data({
    "id": "Minnesota",
    "postal code": "MN"
});
states.push(MN);

//MISSISSIPPI
var MS = map.path(
    "M349.8,252.3l-0.1,0.6h-2.6l-0.7-0.4l-1.1-0.2l-3.5,1l-0.9-0.4l-1.3,2.1l-0.6,0.4l-0.6-1.3l-0.6-2    l-1.7-1.6l0.6-2.8l-0.3-0.5l-0.9,0.1l-4,0.4l-12.5,0.2l-0.4-1.1l0.4-4.3l1.6-2.9l2.7-4.7l-0.2-1.2l0.6-0.3l0.2-1l-1.2-1.1    l-0.1-1.1l-0.9-2.1l-0.1-3l0.7-1.3l-0.1-1.7l-0.9-1.6l0.8-0.8l-0.8-1.3l0.2-0.8l0.8-3.3l1.3-1l-0.3-1.2l1.9-2.7l1.4-0.7l-0.1-0.9    l-0.1-0.9l1.5-2.8l1.2-0.6l0.1-0.5l19.1-2l0.1,3.2l0.1,8.5l-0.4,15.8l-0.1,7.2l1.4,9.6L349.8,252.3L349.8,252.3z"
);
MS.data({
    "id": "Mississippi",
    "postal code": "MS"
});
states.push(MS);

//MISSOURI
var MO = map.path(
    "M312.5,144.5l-1.3-1.6l-0.6-1.2l-32.8,1.2l-1.2,0.1l0.6,1.3l-0.1,1.2l1.3,2l1.6,2.1l1.6,1.4l1.1,0.1    l0.8,0.5v1.5l-0.9,0.8l-0.2,1.2l1,1.7l1.3,1.5l1.3,0.9l0.7,5.9l0.2,18.4l0.1,2.4l0.2,2.7l11.4-0.4l11.8-0.3l10.6-0.4l5.9-0.1    l1.1,1.7l-0.3,1.7l-1.6,1.2l-0.3,0.9l2.7,0.2l2-0.3l0.9-2.8l0.3-3l1.1-1.3l1.3-0.8l0-1.6l0.5-1l-0.9-1.3l-0.7,0.5l-1-1.1l-0.7-2.4    l0.4-1.3l-1-1.7l-0.9-2.3l-2.4-0.4l-3.6-2.9l-0.9-2.1l0.4-1.6l1.1-3.1l0.2-1.5l-1-0.5l-3.5-0.4l-0.5-0.9l-0.1-2.2l-2.8-1.8l-3.6-4    l-1.2-3.7l-0.1-2.2L312.5,144.5L312.5,144.5z"
);
MO.data({
    "id": "Missouri",
    "postal code": "MO"
});
states.push(MO);

//MONTANA
var MT = map.path(
    "M216,46.9l-15.7-1.4l-14.9-1.8l-14.9-2.1L154,38.9l-9.4-1.7l-16.7-3.5l-2.3,10.9l1.7,3.8l-0.7,2.3    l0.9,2.3l1.6,0.7l2.4,5.5l1.4,1.6l0.2,0.6l1.7,0.6l0.2,1l-3.6,9v1.3l1.3,1.6h0.5l2.4-1.5l0.3-0.6l0.8,0.3l-0.1,2.7l1.4,6.4    l1.5,1.3l0.5,0.3l0.9,1.2l-0.2,1.7l0.3,1.7l0.6,0.5l1.2-1.2h1.4l1.6,0.8l1.3-0.5h2.1l1.9,0.8l1.4-0.2l0.2-1.5l1.5-0.3l0.7,0.7    l0.2,1.6l0.7,0.4l1-5.6l54.5,6.9L216,46.9L216,46.9z"
);
MT.data({
    "id": "Montana",
    "postal code": "MT"
});
states.push(MT);

//NEBRASKA
var NE = map.path(
    "M275.6,140.7l1.6,3.6l-0.1,1.2l1.8,2.8l1.4,1.6h-2.6l-22.2-0.5l-20.8-0.5l-11.4-0.4l0.5-10.9    l-16.5-1.5l2.2-22.5l7.9,0.5l10.3,0.6l9.1,0.6l12.1,0.6l5.5-0.2l1,1.2l2.4,1.5l0.6,0.5l2.2-0.7l2-0.2l1.4-0.1l0.9,0.7l2.1,0.8    l1.5,0.8l0.2,0.8l0.5,1h0.9l0.4,0l0.5,2.4l1.5,4.3l0.3,1.9l1.3,1.9l0.3,2.6l0.8,2.2L275.6,140.7L275.6,140.7z"
);
NE.data({
    "id": "Nebraska",
    "postal code": "NE"
});
states.push(NE);

//NEVADA
var NV = map.path(
    "M127.8,112.6l-12.1,65.7l-0.9,0.2l-0.8,1.2l-1.2,0l-0.8-1.4l-1.3-0.2l-0.4-0.6l-0.5,0l-1.4,0.8    l-0.2,3.5l-0.2,2.9l-0.2,4.4l-0.7,1.1l-1.2-0.5l-35.2-53.2l9.7-34.5L127.8,112.6L127.8,112.6z"
);
NV.data({
    "id": "Nevada",
    "postal code": "NV"
});
states.push(NV);

//NEW HAMPSHIRE
var NH = map.path(
    "M477,90.6l0.4-0.5l0.6-1.7l-1.3-0.5l-0.2-1.6l-2-0.6l-0.2-1.4l-3.7-12l-2.3-7.4l-0.5,0l-0.3,0.8    l-0.3-0.2l-0.5-0.5l-0.7,1l0,2.6l0.2,2.9l1,1.4v2.1l-1.9,2.6l-1.3,0.6v0.6l0.6,0.9v4.4l-0.4,4.7l-0.1,2.5l0.5,0.7l-0.1,2.3    l-0.2,0.9l0.5,0.4l8.6-2.3l1.1-0.3l0.9-1.4L477,90.6L477,90.6z"
);
NH.data({
    "id": "New Hampshire",
    "postal code": "NH"
});
states.push(NH);

//NEW JERSEY
var NJ = map.path(
    "M450.9,114l-1.2,1.4v1.6l-1,1.6l-0.1,0.8l0.7,0.7l-0.1,1.2l-1.2,0.6l0.4,1.4l0.1,0.6l1.4,0.2l0.5,1.3    l1.8,1.2l1.2,0.8v0.4l-1.5,1.4l-0.8,1.2l-0.7,1.4l-1.2,0.7l-0.2,0.8l-0.1,0.6l-0.3,1.3l0.6,1.1l1.6,1.5l2.5,1.2l2.1,0.3l0.1,0.7    l-0.4,0.5l0.2,1.4h0.4l1.1-1.2l0.4-2.5l1.4-2.1l1.6-3.3l0.6-2.8l-0.3-0.6l-0.1-4.8l-0.8-1.7l-0.6,0.4l-1.4,0.2l-0.2-0.2l0.6-0.5    l1.1-1l0-0.6l-0.2-1.8l0.3-1.4l-0.1-1l-1.4-0.9l-2.6-0.6l-2.1-0.7L450.9,114L450.9,114z"
);
NJ.data({
    "id": "New Jersey",
    "postal code": "AK"
});
states.push(NJ);

//NEW MEXICO
var NM = map.path(
    "M174.6,234.2l-0.4-2.4l4.4,0.3l15.4,1.5l13.9,0.9l1.1-9.5l2-28.5l0.9-9.9l0.8,0.1l0.4-5.7l-53.1-5.4    l-8.9,61.5l7.9,1l0.7-5.1L174.6,234.2L174.6,234.2z"
);
NM.data({
    "id": "New Mexico",
    "postal code": "NM"
});
states.push(NM);

//NEW YORK
var NY = map.path(
    "M451.3,114.2l-0.6-0.5l-1.3-0.1l-1.2-1l-0.8-3.1l-1.8,0l-1.2-1.4l-9.9,2.2l-21.9,4.5l-3.8,0.6    l-0.4-3.3l0.7-0.6l0.7-0.6l0.5-0.8l0.9-0.6l1-0.9l0.2-0.8l1.1-1.4l0.6-0.5l-0.1-0.5l-0.7-1.6l-0.9-0.1l-1-3.1l1.5-0.9l2.2-0.7    l2.1-0.7l1.6-0.2l3.2-0.1l1,0.7l0.8,0.1l1.1-0.7l1.3-0.6l2.6-0.2l1.1-0.9l0.9-1.6l0.8-1h1.1l1-0.6l0.1-1.2l-0.7-1.1l-0.2-0.7    l0.6-1.1v-0.7h-0.9l-0.9-0.4l-0.4-0.6l-0.1-1.3l3-2.8l0.3-0.4l0.7-1.5l1.5-2.3l1.4-1.9l1.1-1.2l1.2-0.9l1.6-0.6l2.8-0.7l1.6,0.1    l2.3-0.7l3.9-1.1l0.3,2.5l1.2,3.3l0.4,2.6l-0.5,2l1.3,2.3l0.4,1.1l-0.4,1.5l1.5,0.7l0.3,0.2l1.6,5.6l-0.3,2.6l-0.2,5.5l0.4,2.8    l0.4,1.8l0.7,3.7v4.1l-0.6,1.2l0.9,1l0.4,0.9l-1,0.9l0.2,0.7l0.7-0.2l0.7-0.7l1.2-1.3l0.6-0.3l0.8,0.3l1.2,0.1l4-2l1.5-1.4    l0.7-0.7l2.1,0.8l-1.7,1.8l-2,1.5l-3.6,2.7l-1.3,0.5l-3,1l-2.1,0.6l-0.6-0.3l-0.1-1.9l0.2-1.4l-0.1-1.1l-1.4-0.9l-2.3-0.5l-2-0.6    L451.3,114.2L451.3,114.2z"
);
NY.data({
    "id": "New York",
    "postal code": "NY"
});
states.push(NY);

//NORTH CAROLINA
var NC = map.path(
    "M453.6,168.1l1.1,2.5l1.8,3.3l1.2,1.2l0.3,1.2l-1.2,0.1l0.4,0.3l-0.2,2.1l-1.3,0.7l-0.3,1.1l-0.7,1.5    l-1.9,0.8l-1.2-0.2l-0.7-0.1l-0.8-0.7l0.2,0.7v0.5h1l0.4,0.7l-1,3.2h2.1l0.3,0.8l1.2-1.2l0.7-0.2l-1,1.8l-1.6,2.5h-0.7l-0.6-0.2    l-1.4,0.3l-2.6,1.2l-3.3,2.7l-1.7,2.4l-1,3.3l-0.2,1.2l-2.4,0.2l-2.8,0.7l-5.1-4.2l-6.4-3.9l-1.5-0.4l-6.4,0.7l-2.2,0.4l-0.8-1.6    l-1.5-1.1l-8.4,0.2l-3.7,0.4l-4.6,2.3l-3.1,1.3l-10.8,1.3l0.3-2.1l0.9-0.7l1.4-0.3l0.3-1.9l2.1-1.4l2-0.7l2.1-1.8l2.2-1.1l0.3-1.6    l2-2l0.3-0.1c0,0,0,0.6,0.4,0.6s1,0.2,1,0.2l1.2-1.8l1.1-0.3l1.2,0.2l0.8-1.8l1.5-1.3l0.2-1.1l0.1-1.9l2.2,0l3.7-0.4l8-1.1    l7.7-1.1l11-2.4l10.2-2.2l5.7-1.2L453.6,168.1L453.6,168.1z M455.8,185l1.3-1.3l1.6-1.3l0.8-0.3l0.1-1l-0.3-3.1l-0.7-1.2l-0.3-0.9    l0.4-0.1l1.4,2.8l0.2,2.3l-0.1,1.7l-1.7,0.8l-1.4,1.2l-0.6,0.6L455.8,185L455.8,185z"
);
NC.data({
    "id": "North Carolina",
    "postal code": "NC"
});
states.push(NC);

//NORTH DAKOTA
var ND = map.path(
    "M270.1,83.7l-0.3-4.3l-0.9-3.5l-1-6.6l-0.2-5.6l-0.9-1.6l-0.9-2.7l0-5.3l0.3-2l-0.9-2.8L250.7,49    l-9.5-0.3l-13.5-0.7L216,47l-3.6,34.3l28,1.7L270.1,83.7L270.1,83.7z"
);
ND.data({
    "id": "North Dakota",
    "postal code": "ND"
});
states.push(ND);

//OHIO
var OH = map.path(
    "M402.8,116.5l-3.1,2.1l-2,1.2l-1.7,1.9l-2.1,2l-1.6,0.4l-1.5,0.2l-2.8,1.3l-1.1,0.1l-1.7-1.6    l-2.6,0.3l-1.3-0.7L380,123l-2.5,0.4l-5.2,0.8l-5.7,1.1l0.7,7.5l0.9,7l1.3,12l0.3,2.5l2.1-0.1l1.2-0.4l1.7,0.8l1.1,2.2l2.6,0    l1,1.1l0.9,0l1.3-0.7l1.3,0.2l2.8,0.2l0.9-1.1l1.2-0.7l1.1-0.3l0.3,1.4l0.9,0.5l1.8,1.2l1.1,0l0.7-0.3l0.1-1.4l0.8-0.7l0.1-2.4    l0.5-2.1l0.7-0.3l0.7,0.6l0.3,0.9l0.9-0.5l0.2-0.7l-0.6-1l0-1.2l0.4-0.5l1.1-1.7l0.5-0.8l1.1,0.2l1.2-0.8l1.6-1.7l1.4-2.1l0.2-2.6    l0.2-2.6l-0.1-2.7l-0.5-1.5l0.2-0.6l0.9-0.9l-1.2-4.6L402.8,116.5L402.8,116.5z"
);
OH.data({
    "id": "Ohio",
    "postal code": "OH"
});
states.push(OH);

//OKLAHOMA
var OK = map.path(
    "M221.6,181.6l-8.5-0.6l-0.4,5.6l10.4,0.6l16.4,0.7l-1.2,12.5l-0.2,9.1l0.1,0.8l2.2,1.9l1,0.6l0.3-0.1    l0.3-1l0.7,0.9h1v-0.7l1.4,0.7l-0.2,2l2.1,0.1l1.3,0.6l2.1,0.3l1.3,0.9l1.2-1l1.7,0.3l1.3,1.7h0.5v1.2l1.2,0.3l1.2-1.2l0.9,0.3    h1.3l0.5,1.3l3.2,1.1l0.7-0.3l0.9-2.1h0.6l0.6,1l2.1,0.3l1.9,0.7l1.5,0.5l0.9-0.5l0.3-1.3h2.2l1,0.5l1.4-1h0.6l0.4,0.8h2.1l0.8-1    l0.9,0.2l1,1.3l1.6,0.9l1.6,0.5l1,0.6l-0.2-19l-0.7-5.6l-0.1-4.5l-0.7-3.3l-0.4-3.7l0-1.9l-6.2,0.2l-23.7-0.2l-23-1L221.6,181.6    L221.6,181.6z"
).data({
    "id": "Oklahoma",
    "postal code": "OK"
});
states.push(OK);

//OREGON
var OR = map.path(
    "M103.5,107.4l4.5-17.8l0.5-2.2l1.2-2.9l-0.3-0.6l-1.3,0l-0.7-0.9l0.2-0.7l0.3-1.7l2.3-2.8l0.9-0.6    l0.6-0.6l0.8-1.8l2.1-2.9l1.8-2l0.1-1.8l-1.7-1.3l-0.9-2.4l-6.5-1.8l-7.7-1.8l-7.9,0.1l-0.2-0.7l-2.8,1l-2.3-0.3l-1.2-0.8    l-0.6,0.3l-2.4-0.1L81.5,60l-2.7-1L78.4,59l-2.2-0.8l-1,0.9L72,59l-3-2.1l0.3-0.4l0.1-4l-1.2-2l-2.1-0.3l-0.3-1.3l-1.2-0.2l-3,1.1    L60.5,53l-1.6,5.1l-1.6,3.3l-2.6,7.2l-3.3,6.9L47.2,82l-1,1.5l-0.4,4.4L46,94L103.5,107.4L103.5,107.4z"
);
OR.data({
    "id": "Oregon",
    "postal code": "OR"
});
states.push(OR);

//PENNSYLVANIA
var PA = map.path(
    "M448.6,132.5l0.7-0.1l1.2-0.6l0.6-1.3l0.8-1.2l1.6-1.6v-0.4l-1.2-0.8l-1.8-1.2L450,124l-1.4-0.2    l-0.1-0.6l-0.4-1.4l1.2-0.6l0.1-1.2l-0.7-0.7l0.1-0.8l1-1.6v-1.6l1.4-1.4l-0.5-0.3l-1.3-0.1l-1.2-1l-0.8-3.1l-1.8,0.1l-1.3-1.4    l-9.2,2.1l-21.9,4.5l-4.5,0.7l-0.3-3.3l-2.7,2.6L405,115l-2.1,1.5l1.5,9.8l1.3,5l1.8,9.8l1.7-0.3l6.1-0.8l19.4-3.9l7.6-1.4    l4.2-0.8l0.1-0.1l1.1-0.8L448.6,132.5L448.6,132.5z"
);
PA.data({
    "id": "Pennsylvania",
    "postal code": "PA"
});
states.push(PA);

//RHODE ISLAND
var RI = map.path(
    "M473.6,109.2l-1.9-7.6l3.2-0.9l1.1,1l1.7,2.2l1.4,2.2l-1.5,0.8l-0.7-0.1l-0.6,0.9l-1.2,1L473.6,109.2    L473.6,109.2z"
);
RI.data({
    "id": "Rhode Island",
    "postal code": "RI"
});
states.push(RI);

//SOUTH CAROLINA
var SC = map.path(
    "M417.9,226.1l-0.9,0.5l-1.3-0.7l-0.3-1.1l-0.7-1.8l-1.2-1.1l-1.3-0.3l-0.8-2.5l-1.4-3.1l-2.1-1    l-1.1-1l-0.7-1.3l-1.1-1l-1.2-0.7l-1.2-1.5l-1.6-1.2l-2.3-0.9l-0.2-0.7l-1.2-1.5l-0.2-0.7l-1.7-2.6l-1.7,0.1l-2.1-1.2l-0.7-0.7    l-0.2-0.9l0.4-1l1.2-0.5l-0.3-1.2l2.9-1.2l4.7-2.3l4-0.4l8.2-0.2l1.3,1l0.9,1.7l2.2-0.3l6.4-0.7l1.5,0.4l6.4,3.9l5.2,4.1l-2.8,2.8    l-1.3,3.1l-0.2,3.2l-0.8,0.4l-0.6,1.4l-1.2,0.3l-1.1,1.8l-1.4,1.4l-1.2,1.7l-0.8,0.4l-1.8,1.7L421,221l0.5,1.6l-2.6,2.8    L417.9,226.1L417.9,226.1z"
);
SC.data({
    "id": "South Carolina",
    "postal code": "SC"
});
states.push(SC);

//SOUTH DAKOTA
var SD = map.path(
    "M270.7,122l0-0.3l-1.5-2.5l0.9-2.4l0.8-3l-1.4-1.1l-0.2-1.4l0.4-1.3l1.6,0l-0.1-2.6l-0.2-15.4    l-0.3-1.9l-2.1-1.7l-0.5-0.9l0-0.8l1-0.8l0.8-0.8l0.1-1.4L240.4,83l-28-1.8l-2.7,32.5l7.4,0.5l10.2,0.6l9.1,0.5l12.1,0.7l6.1-0.2    l1,1.1l2.7,1.7l0.4,0.4l2.3-0.7l3.3-0.3l0.9,0.7l2.1,0.8l1.5,0.8l0.2,0.8l0.5,1.1L270.7,122L270.7,122z"
);
SD.data({
    "id": "South Dakota",
    "postal code": "SD"
});
states.push(SD);

//TENNESSEE
var TN = map.path(
    "M383.1,180.3l-26.5,2.6l-8,0.9l-2.4,0.3l-2,0l-0.1,2.1l-4.2,0.1l-3.5,0.3l-4.1-0.1l-0.7,3.6l-0.9,2.8    l-1.7,1.4l-0.7,2.2l-0.2,1.3l-2.1,1.2l0.7,1.8l-0.5,2.2l-0.5,0.4l55.2-5.3l0.2-2l0.9-0.8l1.4-0.4l0.3-1.9l2.1-1.4l2.1-0.8l2.1-1.8    l2.3-1l0.3-1.6l2.1-2l0.3-0.1c0,0,0,0.6,0.4,0.6c0.4,0,1,0.2,1,0.2l1.2-1.8l1.1-0.3l1.2,0.2l0.8-1.8l1.5-1.3l0.2-1l0.2-1.9    l-1.1-0.1l-1.3,1l-3.6,0l-9.4,1.2L383.1,180.3L383.1,180.3z"
);
TN.data({
    "id": "Tennessee",
    "postal code": "TN"
});
states.push(TN);

//TEXAS
var TX = map.path(
    "M212,186.6l11.6,0.6l15.9,0.6l-1.2,12l-0.2,9.3l0,1.1l2.2,1.9l1,0.7l0.6-0.3l0.2-0.9l0.6,0.9l1.1,0    l0-0.7l0.9,0.5l0.6,0.2l-0.2,2l2.1,0l1.5,0.6l2,0.3l1.2,1.1l1.1-1.1l1.9,0.3l1.1,1.6l0.5,0.2l-0.1,1l1.1,0.4l1.2-1l1.1,0.3l1.1,0    l0.5,1.2l3.2,1.1l0.8-0.4l0.8-2.1h0.2l0.5,0l0.6,1.1l2,0.3l1.7,0.6l1.7,0.6l0.9-0.5l0.4-1.3l2.3,0l0.9,0.5l1.4-1.1l0.6,0l0.4,0.8    h2.1l0.8-1l1,0.2l1,1.2l1.8,1l1.5,0.4l0.8,0.4l1.2,1l1.6-0.7l1.4,0.6l0.3,3.1l0,5l0.3,4.9l0.4,1.8l1.4,2.3l0.5,2.5l2.2,2.8    l0.1,1.6l0.4,0.4l-0.4,4.3l-1.5,2.6l0.8,1.1l-0.3,1.2l-0.3,3.8l-0.8,1.7l0.2,1.8l-2.9,0.8l-5,2.3l-0.5,1l-1.3,1l-1.1,0.7l-0.7,0.4    l-2.9,2.7l-1.4,1.1l-2.7,1.6l-2.9,1.2l-3.2,1.7l-0.9,0.7l-3,1.8l-1.7,0.3l-2,2.8l-2.1,0.2l-0.5,1l1.2,1l-0.7,2.8l-0.7,2.3l-0.6,2    l-0.4,2.3l0.4,1.2l0.9,3.5l0.5,3.1l0.9,1.4l-0.5,0.7l-1.6,1l-2.9-2l-2.8-0.6l-0.7,0.2l-1.6-0.3l-2.1-1.6l-2.6-0.6l-3.9-1.7l-1.1-2    l-0.7-3.3l-1.6-1l-0.3-1.2l0.3-0.3l0.2-1.7l-0.7-0.3l-0.3-0.5l0.7-2.2l-0.8-1.2l-1.6-0.7l-1.7-2.2l-1.8-3.4l-2.1-1.3l0.1-1    l-2.7-6.3l-0.4-2.1l-0.9-1l-0.1-0.7l-3.1-2.7l-1.3-1.6v-0.6l-1.3-1.1l-3.5-0.6l-3.8-0.3l-1.6-1.2l-2.3,0.9l-1.8,0.7l-1.2,1.6    l-0.5,1.9l-2.2,3.1l-1.2,1.2l-1.3-0.5l-0.9-0.6l-1-0.3l-2-1.2v-0.3l-0.9-1l-2.6-1.1l-3.8-4l-1.2-2.4v-4.1l-1.6-3.3l-0.2-1.4    l-0.8-0.5l-0.6-1.1l-2.6-1.1l-0.7-0.8l-3.6-4l-0.7-1.6l-2.4-1.2l-0.7-2.2l-1.3-1.5l-1-0.2l-0.3-2.4l4.1,0.3l14.8,1.4l14.8,0.8    l1.1-9.9l2-28.3L212,186.6l0.6,0 M263.2,303.7l-0.3-3.6l-1.4-3.7l-0.3-3.6l0.8-4.2l1.7-3.5l1.8-2.8l1.6-1.8l0.3,0.1l-2.4,3.4    l-2.2,3.3l-1,3.4l-0.2,2.6l0.5,3.1l1.3,3.7l0.2,2.6l0.1,0.7L263.2,303.7L263.2,303.7z"
);
TX.data({
    "id": "Texas",
    "postal code": "TX"
});
states.push(TX);

//UTAH
var UT = map.path(
    "M160,176.1l-42.7-6.1l10.5-57.4l23.9,4.5l-0.8,5.4l-1.2,6.7l4,0.5l8.4,0.9l4.2,0.4L160,176.1z"
);
UT.data({
    "id": "Utah",
    "postal code": "UT"
});
states.push(UT);

//VERMONT
var VT = map.path(
    "M458.5,96.5l0.2-2.7l-1.5-5.5l-0.3-0.2l-1.5-0.7l0.4-1.5l-0.4-1.1l-1.4-2.4l0.5-2l-0.4-2.6l-1.2-3.3    l-0.4-2.5l13.5-3.4l0.2,2.8l1,1.4v2.1l-1.9,2.6l-1.3,0.6l0,0.6l0.7,0.8l-0.2,4.1l-0.3,4.7l-0.1,2.8l0.5,0.7l-0.1,2.3l-0.2,0.9    l0.5,0.4l-3.8,0.8L458.5,96.5L458.5,96.5z"
);
VT.data({
    "id": "Vermont",
    "postal code": "VT"
});
states.push(VT);

//VIRGINIA
var VA = map.path(
    "M451.9,153.6l-0.1-1l3.3-1.3l-0.4,1.6l-1.5,1.9l-0.2,2.3l0.2,1.7l-0.9,2.5l-1.1,1l-0.8-2.4l0.2-2.8    l0.8-2.1L451.9,153.6L451.9,153.6z M453.6,168.1l-29.7,6.4l-19.1,2.7l-3.4-0.2l-1.3,1l-3.7,0.1l-4.3,0.5l-5.6,0.8l5.3-2.9l0-1.1    l0.8-1.1l5.4-5.9l2,2.3l1.9,0.5l1.3-0.6l1.1-0.7l1.3,0.7l2-0.7l1-2.3l1.3,0.3l1.5-1.1l0.9,0.3l1.4-1.9l0.2-1.1l-0.5-0.7l0.5-1    l2.7-6.3l0.3-2.9l0.6-0.3l1.1,1.2l2-0.2l1-3.9l1.4-0.3l0.5-1.4l1.3-1.2l1.4-2.9l0-2.6l5,2c0.3,0.2,0.4-2.6,0.4-2.6l1.9,0.8l0,1.5    l3,0.7l1.1,0.6l0.8,1l-0.3,1.9l-1,1.3l0.1,1.1l0.3,0.9l2.5,0.6l2.3,0l1.6,0.5l1,0.2l0.4,1.6l1.6,0.2l0.4,0.6l-0.2,2.4l0.7,0.6    l-0.2,1l0.6,0.4l-0.1,0.7l-1.4,0l0,0.8l1.2,0.8l0.1,0.7l0.9,0.9l0.3,1.3l-1.3,0.7l0.8,0.8l3-0.9L453.6,168.1L453.6,168.1z"
);
VA.data({
    "id": "Virginia",
    "postal code": "VA"
});
states.push(VA);

//WASHINGTON
var WA = map.path(
    "M79.7,21.8l2.2,0.7l4.9,1.4l4.4,1l10.2,2.9l11.7,2.9l7.8,1.6l-7,32.4l-6.4-1.8l-7.9-1.8l-7.8,0    l-0.2-0.7l-2.9,1.1l-2.3-0.4l-1.1-0.8l-0.7,0.3l-2.4-0.1L81.4,60l-2.7-1.1L78.4,59l-2.2-0.8l-1,0.9L72,59l-3-2.1l0.4-0.5l0.1-3.9    l-1.2-2l-2.1-0.3l-0.3-1.3l-1.2-0.2l-1.8,0.6l-1.2-1.6l0.2-1.5l1.4-0.2l0.8-2.1l-1.3-0.6l0.1-1.9l2.2-0.3l-1.4-1.4l-0.7-3.6    l0.3-1.5v-4l-0.9-1.6l1.2-4.8l1.1,0.2l1.2,1.5l1.4,1.3l1.6,1l2.3,1.1l1.6,0.3l1.5,0.7l1.7,0.5l1.2-0.1v-1.2l0.7-0.6l1.1-0.7    l0.2,0.6l0.2,0.9L78,30l-0.2,1.1l0.9,0.7l0.6,1.2l0.3,1l0.7-0.1l0.1-0.7L80,32.7L79.7,31l0.4-0.9l-0.3-0.7v-1.2l0.9-1.8l-0.6-1.3    l-1.2-2.5l0.2-0.4L79.7,21.8L79.7,21.8z M74.8,24.8l1-0.1l0.2,0.7l0.8-0.8h1.2l0.4,0.8l-0.8,0.9l0.3,0.4l-0.4,1L77,27.9    c0,0-0.5,0-0.5-0.1c0-0.2,0.7-1.3,0.7-1.3l-0.9-0.3l-0.2,0.7l-0.4,0.3l-0.8-1.2C75.1,26.1,74.8,24.8,74.8,24.8z"
);
WA.data({
    "id": "Washington",
    "postal code": "WA"
});
states.push(WA);

//WEST VIRGINIA
var WV = map.path(
    "M416,139.8l0.6,2.5l0.6,3.1l1.1-1.3l1.2-1.6l1.3-0.3l0.7-0.7l0.9-1.3l0.7,0.3l1.5-0.2l1.3-1.1l1-0.7    l0.9-0.2l0.7,0.5l1.9,0.9l1,0.9l0.7,0.7l-0.4,2.8l-3-1.3l-2.2-0.8l-0.1,2.6l-1.4,2.8l-1.3,1.2l-0.6,1.4l-1.3,0.3l-0.5,1.8l-0.5,2    l-2,0.2l-1.2-1.2l-0.5,0.3l-0.3,2.8L416,158l-2.5,5.6l0.5,0.6l-0.1,1l-1.4,2l-0.9-0.3L410,168l-1.3-0.3l-1,2.3c0,0-1.7,0.7-2,0.7    c-0.1,0-1.3-0.6-1.3-0.6l-1.2,0.7l-1.2,0.5l-1.9-0.5l-0.6-0.6l-1.1-1.5l-1.6-1l-0.9-1.8l-2.2-1.8l-0.3-1.2l-1.3-0.7l-0.4-0.8    l-0.1-2.7l1.1,0l1-0.4l0.1-1.4l0.8-0.7l0.1-2.6l0.5-2l0.7-0.3l0.7,0.6l0.2,0.9l0.9-0.5l0.2-0.8l-0.6-0.9v-1.2l0.5-0.7l1.2-1.7    l0.7-0.7l1.1,0.2l1.2-0.8l1.6-1.7l1.2-2l0.2-2.9l0.2-2.6V134l-0.6-1.6l0.5-0.7l0.7-0.7l1.8,10.1l2.4-0.4L416,139.8L416,139.8z"
);
WV.data({
    "id": "West Virginia",
    "postal code": "WV"
});
states.push(WV);

//WISCONSIN
var WI = map.path(
    "M341.4,118.6l0-1.6l-0.6-2.3l-0.3-3.1l-0.6-1.2l0.5-1.6l0.4-1.5l0.7-1.3l-0.3-1.7l-0.3-1.8l0.2-0.9    l1-1.2l0.1-1.4l-0.4-0.7l0.3-1.3l-0.2-2.1l1.4-2.9l1.5-3.5l0.1-1.2l-0.2-0.5l-0.4,0.2l-2.1,3.2l-1.4,2.1l-1,0.9l-0.4,1.2l-1,0.4    l-0.6,1l-0.7-0.2l-0.1-0.9l0.7-1.2l1.1-2.4l0.9-0.8l0.5-1.2l-1.3-1l-1-5.3l-1.8-0.7l-1-1.2l-6.2-1.4l-1.5-0.5l-4.2-1.1l-4-0.6    l-1.9-2.6l-0.4,0.3l-0.6-0.1l-0.3-0.6l-0.7,0.2l-0.6,0.1l-0.9,0.5l-0.5-0.3l0.3-1l1-1.6l0.6-0.6l-1-0.7l-1.1,0.4l-1.5,1l-3.8,1.6    l-1.5,0.3l-1.5-0.2l-0.5-0.4l-1.1,1.4l-0.1,1.4v4.3l-0.6,0.8l-2.7,2l-1.2,3l0.2,0.1l1.3,1l0.3,1.6l-0.9,1.6v2l0.2,3.4l1.5,1.5h1.7    l0.9,1.6l1.7,0.2l2,2.9l3.6,2.1l1,1.4l0.5,3.8l0.3,1.7l1.2,0.8l0.1,0.7l-1,1.7l0.1,1.6l1.3,2l1.3,0.6l1.5,0.2l0.7,0.7L341.4,118.6    L341.4,118.6z"
);
WI.data({
    "id": "Wisconsin",
    "postal code": "WI"
});
states.push(WI);

//WYOMING
var WY = map.path(
    "M211.5,91L157,84.1l-7.2,45.1l57.8,6.9L211.5,91z"
);
WY.data({
    "id": "Wyoming",
    "postal code": "WY"
});
states.push(WY);


/*
|------------------------------------------
|Set Default Map Attributes && Functions
|-------------------------------------------
*/
$("#united-states").append("<div class='legend'><span class='legend-practice'>Alley Cropping</span> Standard Offered<br /><span>Standard Not Offered</span></div>"); //sets intial legend default name

/*
|------------------------------------------
|Sets URL parameters for default map selection
|-------------------------------------------
|
|   *Retrieves URL and returns everything after "?" to "query" variable
|   *If query is NOT undefined function splits parameters into array with "&"
|   *If query is undefined returns AlleyCropping as default map
|   *If parameter equals "#map" then page scrolls to map location
|
*/
    function urlSelect(){
            var query = document.URL.split('?')[1];
            if (query !== undefined ) {
                var urlParams = query.split(/["&"]/);
                urlParams.forEach(function(parameter){
                    
                   if (parameter === "#map"){
                       $("html, body").animate({scrollTop: $(parameter).offset().top }, 1000);
                       return;
                   } 
                   
                   
                   for (var i = 0; i< $("input[name='practice']").length; i++){
                           if (parameter === $("input[name=practice]")[i].id) {
                            $("input[name=practice]")[i].checked = true;
                            return;
                           } 
                            
                   }
                });
            } else {
            $("input[name=practice]")[0].checked = true;
        }
        radioButton();
        changeMapColor();
    }


/*
|------------------------------------------
|Set Default Map Attributes && Functions
|-------------------------------------------
|
|   *Iterates over radio buttons
|   *Uses as switch/case to determine which radio button has been selected
|   *Applies appropriate CSS to radio button label
|   *colors can be changes in global variables
|
*/
function radioButton() {
    var $rad = $("fieldset label"), //radio button label selector
        $radInputName = $("input[name=practice]"), //radio input name selector
        i = 0;

    while (i < $rad.length) {
        if ($radInputName[i].checked) {
            switch ($rad[i].className) {

            case "alleycroppingLabel": //Alley Cropping Selection
                $rad.css("border", "2px solid " + "#fff");
                $(".alleycroppingLabel").css("border", "2px solid " + alleyCroppingColor);
                legendSquare1.attr("fill", alleyCroppingColor);
                $(".legend-practice").html(practices[0].substr(0, 1) + practices[0].substr(1).replace(/[A-Z]/g, " $&"));
                break;

            case "multistoryLabel": //Multistory Cropping Selection
                $rad.css("border", "2px solid " + "#fff");
                $("input[name=practice]").css("border", "2px solid " + "#fff");
                $(".multistoryLabel").css("border", "2px solid " + multiStoryColor);
                legendSquare1.attr("fill", multiStoryColor);
                $(".legend-practice").html(practices[1].substr(0, 1) + practices[1].substr(1).replace(/[A-Z]/g, " $&"));
                break;

            case "riparianLabel": //Riparian Forest Buffers Selection
                $rad.css("border", "2px solid " + "#fff");
                $(".riparianLabel").css("border", "2px solid " + riparianColor);
                legendSquare1.attr("fill", riparianColor);
                $(".legend-practice").html(practices[2].substr(0, 1) + practices[2].substr(1).replace(/[A-Z]/g, " $&"));
                break;

            case "silvopastureLabel": //Silvopasture Selection
                $rad.css("border", "2px solid " + "#fff");
                $(".silvopastureLabel").css("border", "2px solid " + silvopastureColor);
                legendSquare1.attr("fill", silvopastureColor);
                $(".legend-practice").html(practices[3].substr(0, 1) + practices[3].substr(1).replace(/[A-Z]/g, " $&"));
                break;

            case "windbreaksLabel": //Windbreak Establishment Selection
                $rad.css("border", "2px solid " + "#fff");
                $(".windbreaksLabel").css("border", "2px solid " + windbreakColor);
                legendSquare1.attr("fill", windbreakColor);
                $(".legend-practice").html(practices[4].substr(0, 1) + practices[4].substr(1).replace(/[A-Z]/g, " $&"));
                break;

            case "windbreakrenovationLabel": //Windbreak Renovation Selection
                $rad.css("border", "2px solid " + "#fff");
                $(".windbreakrenovationLabel").css("border", "2px solid " + windbreakRenoColor);
                legendSquare1.attr("fill", windbreakRenoColor);
                $(".legend-practice").html(practices[5].substr(0, 1) + practices[5].substr(1).replace(/[A-Z]/g, " $&"));
                break;
            default:
                legendSquare2.attr("fill", baseColor);
            }
        }
        i += 1;
    }
}


/*
|-------------------------------
|   Map Color Change Function
|-------------------------------
|   *Iterates through states array
|   *If radio button is selected, function checks to see if an "X" exists for that state & practice
|   *If true, changes map to appropriate color
|   *colors can be changes in global variables
*/

function changeMapColor() {
    states.forEach(function (state) {
        if ($("input[id='AlleyCropping']").is(":checked") && state.data("AlleyCropping") === "X") {
            state.node.style.fill = alleyCroppingColor;
        } else if ($("input[id='MultistoryCropping']").is(":checked") && state.data("MultistoryCropping") === "X") {
            state.node.style.fill = multiStoryColor;
        } else if ($("input[id='RiparianForestBuffers']").is(":checked") && state.data("RiparianForestBuffer") === "X") {
            state.node.style.fill = riparianColor;
        } else if ($("input[id='Silvopasture']").is(":checked") && state.data("SilvopastureEstablishment") === "X") {
            state.node.style.fill = silvopastureColor;
        } else if ($("input[id='WindbreakEstablishment']").is(":checked") && state.data("WindbreakEstablishment") === "X") {
            state.node.style.fill = windbreakColor;
        } else if ($("input[id='WindbreakRenovation']").is(":checked") && state.data("WindbreakRenovation") === "X") {
            state.node.style.fill = windbreakRenoColor;
        } else {
            state.node.style.fill = baseColor;
        }
    });
}

/*
|-----------------------------------------------------------
|   Retrieve & assign practices to states & practices array
|-----------------------------------------------------------
|   * parses practices from xml tag names and stores them in the practices[] array
|   * sets a data property within (i.e. states.data("Alley Cropping") if the state contains the practice
|   * stores practice names in global "practices" array
*/

function getPractices() {
    states.forEach(function (state, i) {
        var childNodeList = $xmlInfo.getElementsByTagName("record")[i].childNodes, //selects all of the elements that are child to "record"
            j = 3;
        while (j < childNodeList.length) {
            practices.push(childNodeList[j].tagName);
            state.data(childNodeList[j].tagName, $(childNodeList[j]).text());
            j += 2;
        }
    });

//Stores practices in global "practices" array
    practices = practices.reduce(function (a, b) {
        if (a.indexOf(b) < 0) {
            a.push(b);
        }
        return a;
    }, []).sort();

}

/*
|-----------------------------------------------------------
|   Infobox Settings
|-----------------------------------------------------------
|   * Updates html text in infobox to correspond to the data retreived from the XML file
|   * Iterates through the Practices array
|   * Determines if the practice exists for respectiv state
|   * If TRUE > displays practice name with checkmark icon
|   * If FALSE > diplays practice name with no icon
*/

function infoBoxShowPractices(state) {
    $(".offeredPractice").empty().append("<p><strong>Conservation practice standards offered for this state include:</strong></p>");
    $(".notOfferedPractice").empty().append("<p><strong>Standards Not Offered:</strong></p>");
    var practiceArr = [];
        practices.forEach(function (practice) {
            if (state.data(practice) === "X") {
                practice = practice.substr(0, 1) + practice.substr(1).replace(/[A-Z]/g, " $&");
                practiceArr.push(practice);
                $(".offeredPractice").append("<span class='listedPractice'><span class='checkmark'></span><span>" + practice + "</span>");
                return false;
            } else {
                practice = practice.substr(0, 1) + practice.substr(1).replace(/[A-Z]/g, " $&");
                $(".notOfferedPractice").append("<span class='listedPractice'><span class='redx'></span><span>" + practice + "</span>");
                return false;
            }
        });
    if (practiceArr.length === 6) {
        $(".notOfferedPractice").empty();
    }

}

/*
|-----------------------------------------------------------
|   Opens Infobox & sets attributes
|-----------------------------------------------------------
|   *sets focus on infobox
|   *retrieves window coordinates by determining the size of the bounding box and offsetting it from the top of #map
|   *sets mapLink var to correct NRCS link
*/
function openBox(evt) {
  $(this).focus(); //works for iPhone 6s
  if (evt.type === "mouseup" || evt.type === "touchend" || evt.keyCode === 13 || evt.keyCode === 32 || evt.keyCode === 27) {
    states.forEach(function (state, i) {
        if ($(".focus" + i).is(":focus")) {
            $(".focus" + i).focus();
// Info box location Variables
            var $map = $("#map"),
                posx = state.getBBox().x //- $map.offset().top * 0.2,
                posy = state.getBBox().y //+ $map.offset().top * 0.8;


//Sets Link to NRCS
            mapLink = "http://efotg.sc.egov.usda.gov/?map=" + state.data("postal code");
//Sets last focused state
            $lastStateFocus = $(".focus" + i);
//shows practices in box
                infoBoxShowPractices(state);
//sets infobox location
                $infobox.css({
                    "top": posy + "px",
                    "left": posx + "px"
                }).focus().find(".infobox_title h1").text(state.data("id"));
              //  showPractices(state);
            }
        });
    }
}

/*
|-----------------------------------------------------------
|   Closes Infobox
|-----------------------------------------------------------
|   *closes infobox when called
*/
function closeBox(evt) {
    if (evt.type === "mouseup" || evt.type === "touchend" || evt.keyCode === 13 || evt.keyCode === 32 || evt.keyCode === 27) {
        $infobox.css({
            "top": "-99999px",
            "left": "-99999px"
        });
        $lastStateFocus.focus();
        return false;
    }
}

/*
|-----------------------------------------------------------
|   Leaving Website Alert
|-----------------------------------------------------------
|   *uses confirm dialogue
*/
function goToNRCS(evt) {
    if (evt.keyCode === 13 || evt.keyCode === 32 || evt.type === "click") {
        if (window.confirm("You are now leaving the National Agroforestry Center website and going to the Natural Resources Conservation website.")){
            window.open(mapLink);
             return false;
        } else {
        return false;
        }
    }
}

$(".trigger").on("keyup touchend click", goToNRCS);


/*
|-----------------------------------------------------------
|   Keyboard Accessibility Function
|-----------------------------------------------------------
|   * highlight() highlights state by checking focus and pressing tab
|   * removeHighlight() removes highlight when focus is no longer on state and is exited by pressing tab
*/
function highlight(evt) {
    states.forEach(function (state, i) {
        if ($(".focus" + i).is(":focus") && evt.keyCode === 9) {
            originalColor = state.node.style.fill;
            state.node.style.fill = highlightColor;
        }
    });
}

function removeHighlight(evt) {
    states.forEach(function (state, i) {
        if ($(".focus" + i).is(":focus") && evt.keyCode === 9) {
            state.node.style.fill = originalColor;
        }
    });
}

/*
|-----------------------------------------------------------
|   Mouse Highlight
|-----------------------------------------------------------
*/

function mouseHighlight (){
    this.node.style.fill = highlightColor;
}

/*
|-----------------------------------------------------------
|   Map Default settings on load & initial function calls
|-----------------------------------------------------------
*/
function mapDefaults() {

    states.forEach(function (state, i) {
//Set Map Location and focus
        state.attr({
            "title": state.data("id"),
            "href": "javascript:;",
			"fill": baseColor,
            "stroke-width": "1",
            "stroke": "#ffffff",
            "opacity": "1"
        }).transform("s1.35,1.35,0,0").translate("0, -22");

        ($("svg a")[i]).setAttribute("class", "focus" + i);

        state.mouseover(mouseHighlight).mouseout(changeMapColor); //calls hovering styles

        $(".focus" + i).keydown(removeHighlight).keyup(highlight); //calls tabbing style

        $(".focus" + i).on("touchend mouseup keyup", openBox); //opens infobox on focused state
    });

    $(".infobox_close").on("touchend mouseup keyup", closeBox); //closes infobox when close x is selected

    $(".practice-selection").on("touchend mouseup", closeBox); //closes infobox when new practice is selected

    $(".infobox").on('keyup', closeBox);
}

getPractices();

/*
|------------------------------------------
|   Remove Preloader
|------------------------------------------
*/

$.when(getPractices).done(function () {
    $(".preloader").fadeOut(200, function () {
        $(this).remove();
    });
});

$('.practice-selection').on("mouseup keyup", function(evt) {
if (evt.type === "mouseup" || evt.keyCode === 9) {
    //$(evt.target).closest('.practice-selection').addClass('active'); //This find closest target when you click
   //$("html, body").animate({scrollTop: $("#map").offset().top}, "slow"); //Scrolls down to map when practice is selected
}
});

$(document).on("mouseup keyup", function(evt){ //Here is when you click in your entire document
    if (evt.type === "mouseup" || evt.keyCode === 9) {
        if($(evt.target).closest('.practice-selection').length === 0) { // If click is not a practice
        //$('.practice-selection').removeClass('active'); //It removes this class existed from any practice
        }
}

});

//Call Map Color Change
$radiolabel.click(changeMapColor).click(radioButton).keyup(function (evt) {
    if (evt.keyCode === 9) {
        radioButton();
    }
});

//Call Map Default
urlSelect();
mapDefaults();
}


/*
|-----------------------------------------------
|   Ajax call
|-----------------------------------------------
|   *loads all information within displayData() on document load
*/

function getXML(url, callback) {
    $.get(url, callback, "xml");
}

getXML(url, displayData);
}); //Document Ready